let submitButton=document.getElementById("barcode-submit"),inputText=document.getElementById("barcode-input"),barcode=document.getElementById("barcode-input"),selector=document.getElementById("element-input");for(let e of document.querySelectorAll(".hdl-button"))e.addEventListener("click",()=>{let e=document.querySelector(".d-collapse"),t=e.classList.contains("hide")?"show":"hide";e.classList.remove("hide","show"),e.classList.add(t)});async function sendEvent(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.scripting.executeScript({target:{tabId:e.id},function:simulateBarcodeScan,args:[barcode.value,selector.value]})}function simulateBarcodeScan(e,t){if(null===(t=document.querySelector(t))){t=document.querySelector("body");for(let n=0;n<e.length;n++){let d=e[n].charCodeAt(0);void 0!==d&&t.dispatchEvent(new KeyboardEvent("keypress",{keyCode:d}))}}else t.value=e}inputText.addEventListener("keydown",e=>{10!=e.keyCode&&13!=e.keyCode||!e.ctrlKey||sendEvent()}),submitButton.addEventListener("click",sendEvent);