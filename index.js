let submitButton=document.getElementById("barcode-submit"),inputText=document.getElementById("barcode-input"),barcode=document.getElementById("barcode-input");async function sendEvent(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.scripting.executeScript({target:{tabId:e.id},function:simulateBarcodeScan,args:[barcode.value]})}function simulateBarcodeScan(e){let t=document.querySelector("body");for(let n=0;n<e.length;n++){let d=e[n].charCodeAt(0);void 0!==d&&t.dispatchEvent(new KeyboardEvent("keypress",{keyCode:d}))}}inputText.addEventListener("keydown",e=>{10!=e.keyCode&&13!=e.keyCode||!e.ctrlKey||sendEvent()}),submitButton.addEventListener("click",sendEvent);